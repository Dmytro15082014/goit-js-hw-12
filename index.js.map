{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49627345-81d87c81626646e8cd4c1e6ab\";\n\nconst getImagesByQuery = async (query, page) => {\n    return await axios(\"https://pixabay.com/api/\", {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: \"15\",\n            page\n        }\n    });\n};\n\nexport default getImagesByQuery;","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst spinner = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".show-more\");\nconst galleryConstructor = new SimpleLightbox('.gallery-card a', { captionsData: \"alt\", captionDelay: \"250\" });\n\nexport default function createGallery(images){\n    gallery.insertAdjacentHTML(\"beforeend\", images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => \n       `<li class=\"image-item\">\n            <div class=\"gallery-card\"><a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" class=\"image\"/></a></div>\n            <ul class=\"image-info\">\n                <li>Likes<p>${likes}</p></li>\n                <li>Views<p>${views}</p></li>\n                <li>Comments<p>${comments}</p></li>\n                <li>Downloads<p>${downloads}</p></li>\n            </ul>\n        </li>`).join(\"\")) \n    galleryConstructor.refresh();\n};\n\nexport const clearGallery = () => {\n    gallery.innerHTML = \"\";\n};\n\nexport const showLoader = () => {\n    spinner.classList.remove(\"visually-hidden\");\n};\n\nexport const hideLoader = () => {\n    spinner.classList.add(\"visually-hidden\");\n};\n\nexport const showLoadMoreButton = () => {\n    loadMoreBtn.classList.remove(\"visually-hidden\");\n };\n\nexport const hideLoadMoreButton = () => { \n    loadMoreBtn.classList.add(\"visually-hidden\");\n};\n","import getImagesByQuery from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport createGallery from \"./js/render-functions\";\nimport { clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\"\n\nconst searchForm = document.querySelector(\".form\");\nconst loadMoreBtn = document.querySelector(\".show-more\");\nlet page = 1;\nlet search;\n\nsearchForm.addEventListener(\"submit\", searchImage);\nloadMoreBtn.addEventListener(\"click\", handleLoadMore)\n\nfunction searchImage(e) {\n    e.preventDefault();\n    showLoader();\n    clearGallery();\n    page = 1;\n    console.log(e.currentTarget);\n    const query = searchForm.elements[0].value.toLowerCase().trim();\n    if (!(query.length > 0)) {\n        iziToast.show(messageError);\n        hideLoader();\n        searchForm.reset();\n        return\n    };\n    showLoadMoreButton();\n    search = query;\n    getImagesByQuery(query, page)\n        .then((response) => {\n            const dataImg = response.data.hits;\n            if (!(dataImg.length)) {\n                iziToast.show(messageError);\n                hideLoadMoreButton()\n                return;\n            }\n            createGallery(dataImg);\n        })\n        .catch((error) => {  \n            messageError.message = error.message;\n            iziToast.show(messageError);\n            hideLoadMoreButton()\n        }            \n        )\n        .finally(() => {\n            hideLoader();\n            searchForm.reset();\n        });   \n};\n\nfunction handleLoadMore(e) {\n    showLoader();\n    page += 1;\n    getImagesByQuery(search, page)\n        .then((response) => { \n            const dataImg = response.data.hits;\n            createGallery(dataImg);\n        })\n        .catch((error) =>{\n            messageError.message = error.message;\n            iziToast.show(messageError);\n        })\n        .finally(() => {\n            hideLoader();\n        })\n}\n\nconst messageError = {\n    title: \"Error\",\n    titleColor: '#fafafb',\n    message: \"Sorry, there are no images matching your search query. Please try again!\",\n    iconColor: \"#fafafb\",\n    color: \"#ef4040\",\n    messageColor: \"#fafafb\",\n    position: \"topRight\",\n    messageSize: \"16px\",\n    messageSize: \"150%\",\n};"],"names":["API_KEY","getImagesByQuery","query","page","axios","gallery","spinner","loadMoreBtn","galleryConstructor","SimpleLightbox","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","searchForm","search","searchImage","handleLoadMore","e","iziToast","messageError","response","dataImg","error"],"mappings":"+vBAEA,MAAMA,EAAU,qCAEVC,EAAmB,MAAOC,EAAOC,IAC5B,MAAMC,EAAM,2BAA4B,CAC3C,OAAQ,CACJ,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,KACV,KAAAC,CACH,CACT,CAAK,ECZCE,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,SAAS,EAC1CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAqB,IAAIC,EAAe,kBAAmB,CAAE,aAAc,MAAO,aAAc,KAAK,CAAE,EAE9F,SAASC,EAAcC,EAAO,CACzCN,EAAQ,mBAAmB,YAAaM,EAAO,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACzH;AAAA,iDAC0CL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA,8BAEzEC,CAAK;AAAA,8BACLC,CAAK;AAAA,iCACFC,CAAQ;AAAA,kCACPC,CAAS;AAAA;AAAA,cAE7B,EAAE,KAAK,EAAE,CAAC,EACpBV,EAAmB,QAAO,CAC9B,CAEO,MAAMW,EAAe,IAAM,CAC9Bd,EAAQ,UAAY,EACxB,EAEae,EAAa,IAAM,CAC5Bd,EAAQ,UAAU,OAAO,iBAAiB,CAC9C,EAEae,EAAa,IAAM,CAC5Bf,EAAQ,UAAU,IAAI,iBAAiB,CAC3C,EAEagB,EAAqB,IAAM,CACpCf,EAAY,UAAU,OAAO,iBAAiB,CAClD,EAEagB,EAAqB,IAAM,CACpChB,EAAY,UAAU,IAAI,iBAAiB,CAC/C,EClCMiB,EAAa,SAAS,cAAc,OAAO,EAC3CjB,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIJ,EAAO,EACPsB,EAEJD,EAAW,iBAAiB,SAAUE,CAAW,EACjDnB,EAAY,iBAAiB,QAASoB,CAAc,EAEpD,SAASD,EAAYE,EAAG,CACpBA,EAAE,eAAc,EAChBR,IACAD,IACAhB,EAAO,EACP,QAAQ,IAAIyB,EAAE,aAAa,EAC3B,MAAM1B,EAAQsB,EAAW,SAAS,CAAC,EAAE,MAAM,cAAc,OACzD,GAAI,EAAEtB,EAAM,OAAS,GAAI,CACrB2B,EAAS,KAAKC,CAAY,EAC1BT,IACAG,EAAW,MAAK,EAChB,MAER,CAAIF,EAAkB,EAClBG,EAASvB,EACTD,EAAiBC,EAAOC,CAAI,EACvB,KAAM4B,GAAa,CAChB,MAAMC,EAAUD,EAAS,KAAK,KAC9B,GAAI,CAAEC,EAAQ,OAAS,CACnBH,EAAS,KAAKC,CAAY,EAC1BP,EAAoB,EACpB,MACH,CACDb,EAAcsB,CAAO,CACjC,CAAS,EACA,MAAOC,GAAU,CACdH,EAAa,QAAUG,EAAM,QAC7BJ,EAAS,KAAKC,CAAY,EAC1BP,EAAoB,CACvB,CACA,EACA,QAAQ,IAAM,CACXF,IACAG,EAAW,MAAK,CAC5B,CAAS,CACT,CAEA,SAASG,EAAeC,EAAG,CACvBR,IACAjB,GAAQ,EACRF,EAAiBwB,EAAQtB,CAAI,EACxB,KAAM4B,GAAa,CAChB,MAAMC,EAAUD,EAAS,KAAK,KAC9BrB,EAAcsB,CAAO,CACjC,CAAS,EACA,MAAOC,GAAS,CACbH,EAAa,QAAUG,EAAM,QAC7BJ,EAAS,KAAKC,CAAY,CACtC,CAAS,EACA,QAAQ,IAAM,CACXT,GACZ,CAAS,CACT,CAEA,MAAMS,EAAe,CACjB,MAAO,QACP,WAAY,UACZ,QAAS,2EACT,UAAW,UACX,MAAO,UACP,aAAc,UACd,SAAU,WACV,YAAa,OACb,YAAa,MACjB"}